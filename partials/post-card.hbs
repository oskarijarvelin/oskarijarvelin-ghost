{{!-- This is a partial file used to generate a post "card"
which templates loop over to generate a list of posts. --}}

<article class="article post-card {{post_class}}">

    {{#if feature_image}}
    <a class="post-card__image" href="{{url}}" title="{{title}}">
        {{!-- This is a responsive image, it loads different sizes depending on device
        https://medium.freecodecamp.org/a-guide-to-responsive-images-with-ready-to-use-templates-c400bd65c433 --}}
        <img
            width="1200"
            height="675"
            srcset="{{img_url feature_image size="s"}} 300w,
                    {{img_url feature_image size="m"}} 600w,
                    {{img_url feature_image size="l"}} 1200w,
                    {{img_url feature_image size="xl"}} 1920w"
            sizes=" (max-width: 700px) calc(100vw - 8vmin), 
                    (max-width: 1000px) calc(50vw - 6vmin), 
                    {{#has index="0"}}784px{{else}}375px{{/has}}"
            src="{{img_url feature_image size="m"}}"
            alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
            loading="lazy"
        />
        {{#if featured}}
            <div class="post-card__ribbon">
                <span class="post-card__ribbon-text">{{@custom.featured_ribbon_text}}</span>
            </div>
        {{/if}}
        {{#has visibility="members"}}
            <div class="post-card__premium-ribbon">
                <span class="post-card__premium-ribbon-text">{{@custom.premium_ribbon_text}}</span>
            </div>
        {{/has}}
        {{#has visibility="paid"}}
            <div class="post-card__premium-ribbon">
                <span class="post-card__premium-ribbon-text">{{@custom.premium_ribbon_text}}</span>
            </div>
        {{/has}}
    </a>
    {{/if}}

    <div class="post-card__content">

        <h2 class="post-card__title"><a href="{{url}}">{{title}}</a></h2>

        <div class="post-card__meta">
            <time datetime="{{date format="YYYY-MM-DD"}}">{{date format="DD.MM.YYYY"}}</time>
            {{#if primary_tag}}
                {{#primary_tag}}
                    <a href="{{url}}"{{#if accent_color}} style="color:{{accent_color}};"{{/if}}>{{name}}</a>
                {{/primary_tag}}
            {{/if}}
            <span>{{reading_time seconds=(t "Alle minuutti") minute=(t "1 min") minutes=(t "% min")}}</span>
        </div>

        <div class="post-card__excerpt">
            <a href="{{url}}">{{excerpt}}</a>
        </div>

    </div>
        
    

</article>
